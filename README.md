# React + Flask Dashboard

This is an application which contains a connected flask backend to a react frontend


## Data
There are two data folder. 
#### 1.
- src/data 
- is for the pics rendering directly in the frontend and the dummy data when the backend data is not successfully loaded.
- Since the tables in Tables/Autolayup in the sidebar is complex, it is easier to just render the pic. If new elements is needed to be added to the dashboard in the future, I suggest to use this way too. Set the pic generating as a scheduled task and save the pic in the src/data folder (Everytime we generate pic, use the same name so it will replace the former pic), render it in the frontend so we don't need to write new APIs in the backend.
- The data in dummy.js is set to repetitive data, so it's easy to figure out if the data was not succesfully sent from the backend.
#### 2.
- backend/data 
- contains four excel file. 
- If files needed to be stored in another place, change the root file directory in data_prefix.py to an absolute path where the data is stored.
- Search # Edit File in all backend files and you can find the paths and filenames.
- Reorder.xlsx is generated from the daily scheduled inventory_report.py in the spare part project. Add a line data.to_excel('reorder.xlsx') to backend/data.
- Production Report {month}.xlsx is generated by monthly_summary.py in the Production Summary project
- {month} week {n}.xlsx is generated by weekly_summary.py in the Production Summary project
- FIReport.xls is downloaded from camstar. Sometimes the file is extension is xlsx, so we may need to edit the filename in the FIoutput.py. Currently the FIoutput.py select the data in the past 12 hours. Time interval can be edited. Search # time interval in the  FIoutput.py.

## APIs
- Backend APIs are stored in base.py
- The frontend request data using axios. To make the program easier to edit, all the axios operations are integrated in the according frontend pages.

# How to run the appilication

- Add a line ```data.to_excel('reorder.xlsx')``` in process_data function in inventory_report.py and save the file in backend/data. 
- Autogenerate and save Production Report {month}.xlsx in backend/data. 
- Autogenerate and save {month} week {n}.xlsx in backend/data. 
- Save the updated FIReport.xls in backend/data. 
- Autogenerate and save rework.jpg in src/data. 


## Backend
Step1: Enter the backend directory and create and activate your environment:

For mac/unix: 

**create:** ```python3 -m venv env```

**activate:** `source env/bin/activate`

For windows: 

**create:** `py -m venv env`

**activate:** `.\env\Scripts\activate`


Step2: Then install the requirements using:
`pip install -r requirements.txt`

## Available Scripts

Return to the base directory(dashboard directory) and run: `npm install` before running the scripts below.

Then, run `npm run start-backend` to start the flask backend server.

Open [http://localhost:5000](http://localhost:5000) to view it in the browser.

Next, run `npm start` to start the frontend section of the application.

Open [http://localhost:3000](http://localhost:3000) to view it in the browser.